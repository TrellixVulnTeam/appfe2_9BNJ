{"ast":null,"code":"import { call, put, takeEvery, takeLatest } from \"redux-saga/effects\"; // Login Redux States\n\nimport { LOGIN_USER, LOGOUT_USER, SOCIAL_LOGIN } from \"./actionTypes\";\nimport { apiError, loginSuccess, logoutUserSuccess } from \"./actions\"; //Include Both Helper File with needed methods\n\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\";\nimport { postFakeLogin, postJwtLogin, postSocialLogin } from \"../../../helpers/fakebackend_helper\";\nimport axios from 'axios';\nconst fireBaseBackend = getFirebaseBackend();\n\nfunction* loginUser(_ref) {\n  let {\n    payload: {\n      user,\n      history\n    }\n  } = _ref;\n\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(fireBaseBackend.loginUser, user.email, user.password);\n      yield put(loginSuccess(response));\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"jwt\") {\n      const response = yield call(postJwtLogin, {\n        email: user.email,\n        password: user.password\n      });\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"fake\") {\n      try {\n        const response = yield call(axios.post, 'https://gorest.co.in/public/v2/users', {\n          headers: {\n            'Authorization': 'Basic YWRtaW50ZGl2OjEyMzQ= ',\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'application/json;charset=UTF-8',\n            'Access-Control-Allow-Headers': 'Content-Type',\n            'Access-Control-Allow-Methods': 'POST, GET , DELETE , PUT , OPTIONS'\n          }\n        });\n        console.log(\"Response : \" + JSON.stringify(response)); //localStorage.setItem(\"authUser\", JSON.stringify('Wh3OyLBmjv7UcF93VSEU/cztR8aoeEE9bFrzeRkdEe+PHOkxRL9FPRtbuELZqPF7zLlTS8oiiV8TAiWgFbPTfDlC1pth33O6JeUCjXIThbI3J3lE1Z6U0tWlzH7IvzGCS/o9D3hPKRhHpjH8lEubQkxx3vu7LSvgHD9ll5L2PZOkFgsAHFf+r/eDepe11shJBFnZ4Jc9IqrdcfrvIvLArfAW5JmyNVTW8QBkqbleNmDP0iFqpdFjw1wIyOFCTkVEE6B5kGqhfRpT2tVhD/mRT9l4Mt/ig/3WuDs4SA1Y1yHrYJBxaq8zNmyRW8eTUIm2EQLfuuKinyUr2TpG1hBVoMQyEZYEGtYmiUmPso9zJYvmHofBkiEY+wDHJE0PmDC3G5yY6hV/ZIcGoTPNnZv44VHBqdq6sIFewM3ZSfFPJ2Hf5nwzZaP6yFSFWr19yz5TmaDKo25aSKKb4irDKcq/2hVijfAi6gcbMf2gauJL2622nUkUCyV5slGoai5TJqzTIxEKSJCFaLA4Z7WoUMM25QjxizyO1ADjqINUc8KHv6xjLMU5Sxpl2t1HJ4+FHECHlb/h9eXJ+eKHV0msI4h8eTX/F/X9V6iPmNDwt05XLnw='))\n\n        yield put(loginSuccess(response));\n        history.push(\"/dashboard\");\n      } catch (e) {\n        console.log(e.message);\n      } // const response = yield call(postFakeLogin, {\n      //   email: user.email,\n      //   password: user.password,\n      // })\n      // console.log(\"Response : \"+JSON.stringify(response));\n      // localStorage.setItem(\"authUser\", JSON.stringify(response))\n      // yield put(loginSuccess(response))\n\n    }\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* logoutUser(_ref2) {\n  let {\n    payload: {\n      history\n    }\n  } = _ref2;\n\n  try {\n    localStorage.removeItem(\"authUser\");\n\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(fireBaseBackend.logout);\n      yield put(logoutUserSuccess(response));\n    }\n\n    history.push(\"/login\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* socialLogin(_ref3) {\n  let {\n    payload: {\n      data,\n      history,\n      type\n    }\n  } = _ref3;\n\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const fireBaseBackend = getFirebaseBackend();\n      const response = yield call(fireBaseBackend.socialLoginUser, data, type);\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    } else {\n      const response = yield call(postSocialLogin, data);\n      localStorage.setItem(\"authUser\", JSON.stringify(response));\n      yield put(loginSuccess(response));\n    }\n\n    history.push(\"/dashboard\");\n  } catch (error) {\n    yield put(apiError(error));\n  }\n}\n\nfunction* authSaga() {\n  yield takeEvery(LOGIN_USER, loginUser);\n  yield takeLatest(SOCIAL_LOGIN, socialLogin);\n  yield takeEvery(LOGOUT_USER, logoutUser);\n}\n\nexport default authSaga;","map":{"version":3,"sources":["D:/React_Code/Skote_React_v3.3.1/Admin-Hooks-Staterkit/src/store/auth/login/saga.js"],"names":["call","put","takeEvery","takeLatest","LOGIN_USER","LOGOUT_USER","SOCIAL_LOGIN","apiError","loginSuccess","logoutUserSuccess","getFirebaseBackend","postFakeLogin","postJwtLogin","postSocialLogin","axios","fireBaseBackend","loginUser","payload","user","history","process","env","REACT_APP_DEFAULTAUTH","response","email","password","localStorage","setItem","JSON","stringify","post","headers","console","log","push","e","message","error","logoutUser","removeItem","logout","socialLogin","data","type","socialLoginUser","authSaga"],"mappings":"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","sourcesContent":["import { call, put, takeEvery, takeLatest } from \"redux-saga/effects\"\n\n// Login Redux States\nimport { LOGIN_USER, LOGOUT_USER, SOCIAL_LOGIN } from \"./actionTypes\"\nimport { apiError, loginSuccess, logoutUserSuccess } from \"./actions\"\n\n//Include Both Helper File with needed methods\nimport { getFirebaseBackend } from \"../../../helpers/firebase_helper\"\nimport {\n  postFakeLogin,\n  postJwtLogin,\n  postSocialLogin,\n} from \"../../../helpers/fakebackend_helper\"\n\nimport axios from 'axios'\n\n\nconst fireBaseBackend = getFirebaseBackend()\n\nfunction* loginUser({ payload: { user, history } }) {\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(\n        fireBaseBackend.loginUser,\n        user.email,\n        user.password\n      )\n      yield put(loginSuccess(response))\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"jwt\") {\n      const response = yield call(postJwtLogin, {\n        email: user.email,\n        password: user.password,\n      })\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\n      yield put(loginSuccess(response))\n    } else if (process.env.REACT_APP_DEFAULTAUTH === \"fake\") {\n      try {\n        const response = yield call(axios.post, 'https://gorest.co.in/public/v2/users', {\n          headers: {\n            'Authorization' : 'Basic YWRtaW50ZGl2OjEyMzQ= ',\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'application/json;charset=UTF-8',\n            'Access-Control-Allow-Headers': 'Content-Type',\n            'Access-Control-Allow-Methods' : 'POST, GET , DELETE , PUT , OPTIONS'\n          }\n        })\n        console.log(\"Response : \"+JSON.stringify(response));\n        //localStorage.setItem(\"authUser\", JSON.stringify('Wh3OyLBmjv7UcF93VSEU/cztR8aoeEE9bFrzeRkdEe+PHOkxRL9FPRtbuELZqPF7zLlTS8oiiV8TAiWgFbPTfDlC1pth33O6JeUCjXIThbI3J3lE1Z6U0tWlzH7IvzGCS/o9D3hPKRhHpjH8lEubQkxx3vu7LSvgHD9ll5L2PZOkFgsAHFf+r/eDepe11shJBFnZ4Jc9IqrdcfrvIvLArfAW5JmyNVTW8QBkqbleNmDP0iFqpdFjw1wIyOFCTkVEE6B5kGqhfRpT2tVhD/mRT9l4Mt/ig/3WuDs4SA1Y1yHrYJBxaq8zNmyRW8eTUIm2EQLfuuKinyUr2TpG1hBVoMQyEZYEGtYmiUmPso9zJYvmHofBkiEY+wDHJE0PmDC3G5yY6hV/ZIcGoTPNnZv44VHBqdq6sIFewM3ZSfFPJ2Hf5nwzZaP6yFSFWr19yz5TmaDKo25aSKKb4irDKcq/2hVijfAi6gcbMf2gauJL2622nUkUCyV5slGoai5TJqzTIxEKSJCFaLA4Z7WoUMM25QjxizyO1ADjqINUc8KHv6xjLMU5Sxpl2t1HJ4+FHECHlb/h9eXJ+eKHV0msI4h8eTX/F/X9V6iPmNDwt05XLnw='))\n        yield put(loginSuccess(response))\n        history.push(\"/dashboard\")\n      } catch (e) {\n        console.log(e.message)\n      }\n      // const response = yield call(postFakeLogin, {\n      //   email: user.email,\n      //   password: user.password,\n      // })\n      // console.log(\"Response : \"+JSON.stringify(response));\n      // localStorage.setItem(\"authUser\", JSON.stringify(response))\n      // yield put(loginSuccess(response))\n    }\n    \n  } catch (error) {\n    yield put(apiError(error))\n  }\n}\n\nfunction* logoutUser({ payload: { history } }) {\n  try {\n    localStorage.removeItem(\"authUser\")\n\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const response = yield call(fireBaseBackend.logout)\n      yield put(logoutUserSuccess(response))\n    }\n    history.push(\"/login\")\n  } catch (error) {\n    yield put(apiError(error))\n  }\n}\n\nfunction* socialLogin({ payload: { data, history, type } }) {\n  try {\n    if (process.env.REACT_APP_DEFAULTAUTH === \"firebase\") {\n      const fireBaseBackend = getFirebaseBackend()\n      const response = yield call(\n        fireBaseBackend.socialLoginUser,\n        data,\n        type,\n      )\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\n      yield put(loginSuccess(response))\n    } else {\n      const response = yield call(postSocialLogin, data)\n      localStorage.setItem(\"authUser\", JSON.stringify(response))\n      yield put(loginSuccess(response))\n    }\n    history.push(\"/dashboard\")\n  } catch (error) {\n    yield put(apiError(error))\n  }\n}\n\nfunction* authSaga() {\n  yield takeEvery(LOGIN_USER, loginUser)\n  yield takeLatest(SOCIAL_LOGIN, socialLogin)\n  yield takeEvery(LOGOUT_USER, logoutUser)\n}\n\nexport default authSaga\n"]},"metadata":{},"sourceType":"module"}